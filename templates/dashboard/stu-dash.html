{% extends '../student_base.html' %}
{% load static %}

{% block content %}
<section class="student-job-board container my-5">

    <!-- Available Jobs Section -->
    <h3 class="mb-4 fw-bold text-warning">ðŸ”¥ Apply for Jobs</h3>
    {% if jobs %}
    <div class="row g-4">
        {% for job in jobs %}
        <div class="col-lg-4 col-md-6 col-12">
            <a href="../single-job/{{ job.id }}/" class="text-decoration-none text-dark">
                <div class="card h-100 shadow-sm border-0 job-card-hover px-4 py-3 rounded-4">
                    <div class="d-flex align-items-center mb-3">
                        {% if job.company.logo %}
                        <img src="{{ job.company.logo.url }}" alt="Logo" class="rounded-circle border border-warning border-3 me-3" width="60" height="60">
                        {% else %}
                        <img src="{% static 'img/default-logo.png' %}" alt="Logo" class="rounded-circle border border-warning border-3 me-3" width="60" height="60">
                        {% endif %}
                        <div>
                            <h5 class="fw-bold mb-0">{{ job.position }}</h5>
                            <p class="text-muted mb-0">{{ job.company.company_name }}</p>
                        </div>
                    </div>
                    <p class="card-text text-secondary small">{{ job.description|truncatewords:25 }}</p>
                    <div class="d-flex justify-content-between align-items-center mt-3">
                        <span class="fw-bold text-danger">â‚¹{{ job.pay_rate }} / hr</span>
                        <span class="text-muted small">{{ job.no_of_applicants }} applicants</span>
                        <span class="badge bg-warning text-dark">{{ job.last_apply_date }}</span>
                    </div>
                </div>
            </a>
        </div>
        {% endfor %}
    </div>
    {% else %}
        <p class="text-muted">No active job postings available at the moment.</p>
    {% endif %}

    <!-- Divider -->
    <hr class="my-5 border-warning">

    <!-- Applied Jobs Section -->
    <h3 class="mb-4 fw-bold text-warning">âœ… Jobs You Applied For</h3>
    {% if applications %}
    <div class="row g-4">
        {% for app in applications %}
        <div class="col-lg-4 col-md-6 col-12">
            <div class="card h-100 shadow-sm border-0 px-4 py-3 rounded-4">
                <div class="d-flex align-items-center mb-3">
                    {% if app.job.company.logo %}
                    <img src="{{ app.job.company.logo.url }}" alt="Logo" class="rounded-circle border border-warning border-3 me-3" width="60" height="60">
                    {% else %}
                    <img src="{% static 'img/default-logo.png' %}" alt="Logo" class="rounded-circle border border-warning border-3 me-3" width="60" height="60">
                    {% endif %}
                    <div>
                        <h5 class="fw-bold mb-0">{{ app.job.position }}</h5>
                        <p class="text-muted mb-0">{{ app.job.company.company_name }}</p>
                    </div>
                </div>
                <p class="card-text text-secondary small">{{ app.job.description|truncatewords:25 }}</p>
                <div class="d-flex justify-content-between align-items-center mt-3">
                    <span class="text-muted small">{{ app.job.no_of_applicants }} applicants</span>
                    <span class="badge bg-warning text-dark">{{ app.job.last_apply_date }}</span>
                </div>
                <div class="application-status mt-3 pt-2 border-top">
                    {% if app.status == "placed" %}
                    <span class="badge bg-success px-3 py-2">Placed</span>
                    {% elif app.status == "rejected" %}
                    <span class="badge bg-danger px-3 py-2">Rejected</span>
                    {% else %}
                    <span class="badge bg-secondary px-3 py-2">In Review</span>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
        <p class="text-muted">You haven't applied for any jobs yet.</p>
    {% endif %}

</section>

<!-- Custom CSS -->
<style>
.job-card-hover {
    transition: all 0.3s ease;
    border-top: 4px solid transparent;
}
.job-card-hover:hover {
    transform: translateY(-5px);
    box-shadow: 0px 6px 20px rgba(255, 165, 0, 0.3);
    border-top: 4px solid #ff8c00;
}
</style>
{% endblock content %}
